<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title>squares</title>
  <style type="text/css">code{white-space: pre;}</style>
  <style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
  </style>
  <link href="../css/bootstrap.min.css" rel="stylesheet">
  <style type="text/css">
  td.lineNumbers {width:60px;}
  </style>
  <style id="theStyle">
  g.square
  {
      transition: transform 1s ease;
  }
  </style>
</head>
<body>

		<nav class="navbar navbar-default">
		  <div class="container-fluid">
		    <div class="navbar-header">
		      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
		        <span class="sr-only">Toggle navigation</span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		        <span class="icon-bar"></span>
		      </button>
		      <a class="navbar-brand" href="http://renato-mauro.github.io/redot/">REDOT</a>
		    </div>
		    <div id="navbar" class="navbar-collapse collapse">
		      <ul class="nav navbar-nav">
		        <li><a href="https://github.com/renato-mauro/redot">Github</a></li>
		        <li><a href="#">Tutorial</a></li>
		        <li><a href="https://github.com/renato-mauro/redot/archive/master.zip">Download</a></li>
		        <li class="dropdown">
		          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Examples <span class="caret"></span></a>
		          <ul class="dropdown-menu">
	
<li><a href="http://renato-mauro.github.io/redot/site/examples/barchart1.html">BarChart1 Example</a></li>
<li><a href="http://renato-mauro.github.io/redot/site/examples/d3force1.html">D3 Force 1 Layout Example</a></li>
<li><a href="http://renato-mauro.github.io/redot/site/examples/filter.html">Filter Example</a></li>
<li><a href="http://renato-mauro.github.io/redot/site/examples/piechart1.html">PieChart1 Example</a></li>
<li><a href="http://renato-mauro.github.io/redot/site/examples/piegrid1.html">PieGrid1 Example</a></li>
<li><a href="http://renato-mauro.github.io/redot/site/examples/squares.html">Squares Example</a></li>

		          </ul>
		        </li>
		      </ul>
		    </div><!--/.nav-collapse -->
		  </div><!--/.container-fluid -->
		</nav>
<div class="container">
<h1 id="squares-example">Squares Example</h1>
<p>Squares Example</p>
<button onclick="jsfiddle('Squares Example','Squares Example','')">
Open in JSFiddle
</button>
<div id="main" style="margin:10px 0;">

</div>
<h2 id="css-squares.css">CSS (squares.css)</h2>
<div class="sourceCode"><table class="sourceCode css numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
</pre></td><td class="sourceCode"><pre><code class="sourceCode css">g<span class="fl">.square</span>
<span class="kw">{</span>
    <span class="kw">transition:</span> transform <span class="dt">1s</span> ease<span class="kw">;</span>
<span class="kw">}</span></code></pre></td></tr></table></div>
<h2 id="javascript">Javascript</h2>
<div class="sourceCode"><table class="sourceCode javascript numberLines"><tr class="sourceCode"><td class="lineNumbers"><pre>1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
</pre></td><td class="sourceCode"><pre><code class="sourceCode javascript"><span class="kw">var</span> data <span class="op">=</span> []<span class="op">;</span>
<span class="cf">for</span>(<span class="kw">var</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span><span class="dv">20</span><span class="op">;</span> i<span class="op">++</span>) <span class="co">// sample with 20 elements</span>
<span class="op">{</span>
    <span class="kw">var</span> obj <span class="op">=</span> <span class="op">{</span> <span class="op">};</span>
    <span class="va">obj</span>.<span class="at">a</span> <span class="op">=</span> <span class="at">parseInt</span>(<span class="va">Math</span>.<span class="at">random</span>()<span class="op">*</span><span class="dv">40</span>)<span class="op">+</span><span class="dv">10</span><span class="op">;</span>
    <span class="va">obj</span>.<span class="at">b</span> <span class="op">=</span> <span class="at">parseInt</span>(<span class="va">Math</span>.<span class="at">random</span>()<span class="op">*</span><span class="dv">40</span>)<span class="op">+</span><span class="dv">10</span><span class="op">;</span>
    <span class="va">obj</span>.<span class="at">c</span> <span class="op">=</span> <span class="at">parseInt</span>(<span class="va">Math</span>.<span class="at">random</span>()<span class="op">*</span><span class="dv">40</span>)<span class="op">+</span><span class="dv">10</span><span class="op">;</span>
    <span class="va">data</span>.<span class="at">push</span>(obj)<span class="op">;</span>
<span class="op">}</span>

<span class="va">data</span>.<span class="at">select</span> <span class="op">=</span> <span class="kw">function</span>(attributeName)
<span class="op">{</span>
    <span class="kw">this</span>.<span class="at">sort</span>(<span class="kw">function</span>(a<span class="op">,</span>b)<span class="op">{</span><span class="cf">return</span> b[attributeName]<span class="op">-</span>a[attributeName]<span class="op">}</span>)<span class="op">;</span>
    <span class="cf">for</span>(<span class="kw">var</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span> i<span class="op">&lt;</span><span class="kw">this</span>.<span class="at">length</span><span class="op">;</span> i<span class="op">++</span>)
    <span class="op">{</span>
        <span class="kw">this</span>[i].<span class="at">value</span> <span class="op">=</span> <span class="kw">this</span>[i][attributeName]<span class="op">;</span>
    <span class="op">}</span>
    <span class="va">redot</span>.<span class="at">changed</span>(<span class="kw">this</span>)<span class="op">;</span>
<span class="op">}</span>

<span class="va">data</span>.<span class="at">select</span>(<span class="st">&#39;a&#39;</span>)<span class="op">;</span>

<span class="kw">function</span> <span class="at">SquareChart</span>()
<span class="op">{</span>
    <span class="kw">this</span>.<span class="at">width</span>    <span class="op">=</span> <span class="dv">1024</span><span class="op">;</span>
    <span class="kw">this</span>.<span class="at">height</span>   <span class="op">=</span> <span class="dv">300</span><span class="op">;</span>
    
    <span class="co">/**********************************************************************************</span>
<span class="co">    &lt;div&gt;</span>
<span class="co">        &lt;svg width=&quot;{width+50}&quot; height=&quot;{height+50}&quot; style=&quot;border: 1px black solid;&quot;&gt;</span>
<span class="co">            &lt;g transform=&quot;translate(25 {25+height/2})&quot;&gt;</span>
<span class="co">                &lt;include template=&quot;{Square}&quot; data=&quot;{d}&quot; /&gt;</span>
<span class="co">            &lt;/g&gt;</span>
<span class="co">        &lt;/svg&gt;</span>
<span class="co">    &lt;/div&gt;</span>
<span class="co">    &lt;div&gt;</span>
<span class="co">        &lt;button onclick=&quot;{d.select(&#39;a&#39;)}&quot;&gt;Show A&lt;/button&gt;</span>
<span class="co">        &lt;button onclick=&quot;{d.select(&#39;b&#39;)}&quot;&gt;Show B&lt;/button&gt;</span>
<span class="co">        &lt;button onclick=&quot;{d.select(&#39;c&#39;)}&quot;&gt;Show C&lt;/button&gt;</span>
<span class="co">    &lt;/div&gt;</span>
<span class="co">    ********************************************************************************/</span>
<span class="op">}</span>

<span class="kw">function</span> <span class="at">Square</span>()
<span class="op">{</span>    
    <span class="kw">this</span>.<span class="at">squareRangeOdd</span> <span class="op">=</span> <span class="va">redot</span>.<span class="at">stack</span>(<span class="st">&quot;{(i==0||i%2==1)?d.value:0}&quot;</span>)<span class="op">;</span>
    <span class="kw">this</span>.<span class="at">squareRangeEven</span> <span class="op">=</span> <span class="va">redot</span>.<span class="at">stack</span>(<span class="st">&quot;{i%2==0?d.value:0}&quot;</span>)<span class="op">;</span>

    <span class="kw">this</span>.<span class="at">relativeStart</span> <span class="op">=</span> <span class="st">&quot;{i%2==0?squareRangeEven.begin:squareRangeOdd.begin}&quot;</span><span class="op">;</span>
    <span class="kw">this</span>.<span class="at">relativeEnd</span> <span class="op">=</span> <span class="st">&quot;{i%2==0?squareRangeEven.end:squareRangeOdd.end}&quot;</span><span class="op">;</span>

    <span class="kw">this</span>.<span class="at">x</span> <span class="op">=</span> <span class="st">&quot;{relativeStart}&quot;</span><span class="op">;</span>
    <span class="kw">this</span>.<span class="at">width</span> <span class="op">=</span> <span class="st">&quot;{(relativeEnd-relativeStart)}&quot;</span><span class="op">;</span>
    <span class="kw">this</span>.<span class="at">y</span> <span class="op">=</span> <span class="st">&quot;{i==0?(-width/2):(i%2==0?0:-width)}&quot;</span><span class="op">;</span>    
    
    <span class="co">/***********************************************************************************</span>
<span class="co">    &lt;g class=&quot;square&quot; style=&quot;transform:translate({x}px,{y}px);&quot;&gt;</span>
<span class="co">        &lt;rect x=&quot;2&quot; y=&quot;2&quot; height=&quot;{width-4}&quot; width=&quot;{width-4}&quot;/&gt;</span>
<span class="co">    &lt;/g&gt;</span>
<span class="co">    ***********************************************************************************/</span>
<span class="op">}</span>

<span class="va">redot</span>.<span class="at">applyTemplate</span>(<span class="st">&quot;#main&quot;</span><span class="op">,</span> SquareChart<span class="op">,</span> data)<span class="op">;</span></code></pre></td></tr></table></div>
<script type="text/javascript" src="../../redot.js"></script>
<script type="text/javascript" id="theScript">
var data = [];
for(var i=0; i<20; i++) // sample with 20 elements
{
    var obj = { };
    obj.a = parseInt(Math.random()*40)+10;
    obj.b = parseInt(Math.random()*40)+10;
    obj.c = parseInt(Math.random()*40)+10;
    data.push(obj);
}

data.select = function(attributeName)
{
    this.sort(function(a,b){return b[attributeName]-a[attributeName]});
    for(var i=0; i<this.length; i++)
    {
        this[i].value = this[i][attributeName];
    }
    redot.changed(this);
}

data.select('a');

function SquareChart()
{
    this.width    = 1024;
    this.height   = 300;
    
    /**********************************************************************************
    <div>
        <svg width="{width+50}" height="{height+50}" style="border: 1px black solid;">
            <g transform="translate(25 {25+height/2})">
                <include template="{Square}" data="{d}" />
            </g>
        </svg>
    </div>
    <div>
        <button onclick="{d.select('a')}">Show A</button>
        <button onclick="{d.select('b')}">Show B</button>
        <button onclick="{d.select('c')}">Show C</button>
    </div>
    ********************************************************************************/
}

function Square()
{    
    this.squareRangeOdd = redot.stack("{(i==0||i%2==1)?d.value:0}");
    this.squareRangeEven = redot.stack("{i%2==0?d.value:0}");

    this.relativeStart = "{i%2==0?squareRangeEven.begin:squareRangeOdd.begin}";
    this.relativeEnd = "{i%2==0?squareRangeEven.end:squareRangeOdd.end}";

    this.x = "{relativeStart}";
    this.width = "{(relativeEnd-relativeStart)}";
    this.y = "{i==0?(-width/2):(i%2==0?0:-width)}";    
    
    /***********************************************************************************
    <g class="square" style="transform:translate({x}px,{y}px);">
        <rect x="2" y="2" height="{width-4}" width="{width-4}"/>
    </g>
    ***********************************************************************************/
}

redot.applyTemplate("#main", SquareChart, data);

</script>
</div>

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script src="../js/bootstrap.min.js"></script>
		<script>
			var firstClick = true;
			function jsfiddle(title,description,extrajs)
			{
				var form = document.getElementById("fiddleForm");
				if(firstClick)
				{
					form.title.value = title;
					form.description.value = description;
					form.html.value = "<div id=\"main\"></div>";
					var script = document.getElementById("theScript");
					if(script)
					{
						form.js.value = script.textContent.trim();
					}

					var style = document.getElementById("theStyle");
					if(style)
					{
						form.css.value = style.textContent.trim();
					}
					if(extrajs)
					{
						firstClick = false;
						form.resources.value += extrajs;
					}
				}
				form.submit();
			}
		</script>
		<form id="fiddleForm" method="POST" action="http://jsfiddle.net/api/post/library/pure/" target="_bkank">
			<input type="hidden" name="html" value=""/>
			<input type="hidden" name="js" value=""/>
			<input type="hidden" name="css" value=""/>
			<input type="hidden" name="panel_html" value="0"/>
			<input type="hidden" name="panel_js" value="0"/>
			<input type="hidden" name="panel_css" value="0"/>
			<input type="hidden" name="resources" value="http://renato-mauro.github.io/redot/redot.js"/>
			<input type="hidden" name="title" value=""/>
			<input type="hidden" name="description" value=""/>
			<input type="hidden" name="normalize_css" value="no"/>
			<input type="hidden" name="dtd" value="html 4"/>
			<input type="hidden" name="wrap" value="b"/>
		</form>
</body>
</html>
